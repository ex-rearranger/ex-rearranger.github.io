<h1 id="hexo-generator-searchdb-custom">hexo-generator-searchdb (custom)</h1>
<p><a href="https://github.com/next-theme/hexo-generator-searchdb/actions?query=workflow%3ALinter"><img src="https://img.shields.io/github/workflow/status/next-theme/hexo-generator-searchdb/Linter?style=flat-square" alt="Build Status"></a><br>
<a href="https://www.npmjs.com/package/hexo-generator-searchdb"><img src="https://img.shields.io/npm/v/hexo-generator-searchdb?style=flat-square" alt="npm-image"></a><br>
<a href="https://hexo.io"><img src="https://img.shields.io/badge/hexo-%3E%3D%203.0-blue?style=flat-square" alt="hexo-image"></a><br>
<a href="LICENSE"><img src="https://img.shields.io/npm/l/hexo-generator-searchdb?style=flat-square" alt="lic-image"></a></p>
<p>Seach data generator plugin for Hexo.<br>
This plugin is used for generating a search index file, which contains all the necessary data of your articles that you can use to write a local search engine for your blog. Supports both XML and JSON format output.</p>
<blockquote>
<p>I’ve made some changes to the original plugin to make it work <strong>MULTILINGUAL</strong> in my custom butterfly theme.</p>
</blockquote>
<h2 id="Install">Install</h2>
<p><img src="https://img.shields.io/github/languages/code-size/next-theme/hexo-generator-searchdb?style=flat-square" alt="size-image"><br>
<a href="https://www.npmjs.com/package/hexo-generator-searchdb"><img src="https://img.shields.io/npm/dm/hexo-generator-searchdb?style=flat-square" alt="dm-image"></a><br>
<a href="https://www.npmjs.com/package/hexo-generator-searchdb"><img src="https://img.shields.io/npm/dt/hexo-generator-searchdb?style=flat-square" alt="dt-image"></a></p>
<pre><code class="language-bash">$ npm install /path/to/hexo-generator-searchdb-custom --save
</code></pre>
<h2 id="Options">Options</h2>
<p>You can configure this plugin in your root <code>_config.yml</code>. All the arguments are optional.</p>
<pre><code class="language-yaml">search:
  path: search.xml
  field: post
  content: true
  format: html
</code></pre>
<ul>
<li><strong>path</strong> - file path. By default is <code>search.xml</code>. If the file extension is <code>.json</code>, the output format will be JSON. Otherwise XML format file will be exported.</li>
<li><strong>field</strong> - the search scope you want to search, you can chose:
<ul>
<li><strong>post</strong> (Default) - will only cover all the posts of your blog.</li>
<li><strong>page</strong> - will only cover all the pages of your blog.</li>
<li><strong>all</strong> - will cover all the posts and pages of your blog.</li>
</ul>
</li>
<li><strong>content</strong> - whether contains the whole content of each article. If <code>false</code>, the generated results only cover title and other meta info without mainbody. By default is <code>true</code>.</li>
<li><strong>format</strong> - the form of the page contents, options are:
<ul>
<li><strong>html</strong> (Default) - original html string being minified.</li>
<li><strong>striptags</strong> - original html string being minified, and remove all the tags.</li>
<li><strong>raw</strong> - markdown text of each posts or pages.</li>
</ul>
</li>
</ul>
<h2 id="FAQ">FAQ</h2>
<h3 id="What’s-this-plugin-supposed-to-do">What’s this plugin supposed to do?</h3>
<p>This plugin is used for generating a xml / json file from your Hexo blog that provides data for searching.</p>
<h3 id="Where’s-this-file-saved-to">Where’s this file saved to?</h3>
<p>After executing <code>hexo g</code> you will get the generated result at your public folder.</p>
<h3 id="How-to-use-this-plugin-in-my-Hexo-blog">How to use this plugin in my Hexo blog?</h3>
<p>You have two choices:</p>
<ul>
<li>
<p>you don’t want to write search engine by yourself. There are many themes that take use this plugin for local searching that works out of box.</p>
</li>
<li>
<p>you are familiar with JavaScript and would like to write your own search engine. You can implement one by yourself according to the <a href="https://github.com/next-theme/hexo-generator-searchdb/blob/main/dist/search.js">template code <code>search.js</code></a>. There is no documentation at present, but you can find its usage in the source code of the <a href="https://github.com/next-theme/hexo-theme-next">theme NexT</a>. Generally there are 3 steps:</p>
<ol>
<li>write a <a href="https://github.com/next-theme/hexo-theme-next/blob/v8.8.0/layout/_partials/search/localsearch.njk">search view</a>. This is the place for displaying a search form and search results;</li>
<li>load the <code>search.js</code> script via CDN, for example:</li>
</ol>
<pre><code class="language-html">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>A <code>LocalSearch</code> class is provided in the <code>search.js</code> which tells the browser how to grab search data and filter out contents what we’re searching;</p>
<ol start="3">
<li>write a <a href="https://github.com/next-theme/hexo-theme-next/blob/v8.8.0/source/js/third-party/search/local-search.js">search script</a>, make use of the previous <code>LocalSearch</code> class.</li>
</ol>
</li>
</ul>
